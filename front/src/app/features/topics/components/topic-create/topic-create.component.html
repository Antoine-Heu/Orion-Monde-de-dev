<div class="create-topic-container">
  <div class="title-section">
    <div class="back-btn" (click)="goBack()">
      <mat-icon>keyboard_backspace</mat-icon>
    </div>
    <div class="topic-content-wrapper">
      <h1 class="topic-title">Créer un thème</h1>
    </div>
  </div>

  <div class="create-topic-content">

    <form [formGroup]="topicForm" (ngSubmit)="onSubmit()" class="topic-form">
      <div class="form-group">
        <label class="form-label">Titre</label>
        <input
          class="form-input"
          formControlName="title"
          type="text"
          placeholder="Entrez le titre du thème">
        <div class="error-message" *ngIf="topicForm.get('title')?.hasError('required') && topicForm.get('title')?.touched">
          Le titre est requis
        </div>
        <div class="error-message" *ngIf="topicForm.get('title')?.hasError('minlength') && topicForm.get('title')?.touched">
          Le titre doit contenir au moins 3 caractères
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Description</label>
        <textarea
          class="form-textarea"
          formControlName="description"
          rows="8"
          placeholder="Entrez la description du thème"></textarea>
        <div class="error-message" *ngIf="topicForm.get('description')?.hasError('required') && topicForm.get('description')?.touched">
          La description est requise
        </div>
        <div class="error-message" *ngIf="topicForm.get('description')?.hasError('minlength') && topicForm.get('description')?.touched">
          La description doit contenir au moins 10 caractères
        </div>
      </div>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="form-actions">
        <button
          type="submit"
          [disabled]="topicForm.invalid || isLoading"
          class="submit-btn">
          {{ isLoading ? 'Création...' : 'Créer' }}
        </button>
      </div>
    </form>
  </div>
</div>
