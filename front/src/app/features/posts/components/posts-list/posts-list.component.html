<div class="posts-container" *ngIf="posts$ | async as posts">
  <div class="posts-header">
    <button class="create-btn" (click)="navigateToCreate()">Créer un article</button>
    <div *ngIf="posts.length > 1" class="sort-container">
      <span class="sort-trigger" [matMenuTriggerFor]="sortMenu">
        Trier par
        <mat-icon>arrow_drop_down</mat-icon>
      </span>
      <mat-menu #sortMenu="matMenu">
        <button mat-menu-item (click)="setSortOption('date-desc', 'Date (plus récent)')">
          Date (plus récent)
        </button>
        <button mat-menu-item (click)="setSortOption('date-asc', 'Date (plus ancien)')">
          Date (plus ancien)
        </button>
        <button mat-menu-item (click)="setSortOption('post-asc', 'Article (A-Z)')">
          Article (A-Z)
        </button>
      </mat-menu>
    </div>
  </div>

  <div class="posts-grid">
    <div class="post-card" *ngFor="let post of posts" (click)="navigateToDetail(post.id)">
      <div class="post-header">
        <h3 class="post-title">{{ post.title }}</h3>
      </div>
      <div class="post-meta">
        <span class="post-date">{{ post.createdAt | date: 'dd/MM/yyyy' }}</span>
        <span class="post-author">{{ post.authorName }}</span>
      </div>
      <div class="post-content">
        <p>{{ post.content }}</p>
      </div>
    </div>
  </div>

  <div *ngIf="posts.length === 0" class="no-posts">
    <p>Aucun article à afficher. Abonnez-vous à des thèmes pour voir des articles !</p>
  </div>
</div>
